要在網頁上增加「歷史預測圖表」，最專業的做法是使用 **Chart.js** 這個輕量級的 JavaScript 庫。它可以讓你用少量的程式碼繪製出精美的折線圖（Line Chart）。

我們需要調整前端 `index.html` 的三個部分：**引入圖表庫**、**建立畫布**、以及**更新圖表邏輯**。

---

### ## **1. 引入圖表庫與建立畫布**

在 `<head>` 中引入 Chart.js，

```html
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
```
並在 `<div id="resultBox">` 內部新增一個畫布 (`<canvas>`)：
```html
<div id="resultBox">
    <p style="margin:0; color:#000000; font-size: 24px;">預估租借量</p>
    <div class="count" id="predictCount">0</div>
    <div style="height: 200px; width: 100%; margin-top: 20px;">
        <canvas id="historyChart"></canvas>
    </div>
</div>

```

---

### ## **2. 初始化圖表邏輯 (JavaScript)**

在 `<script>` 標籤最上方，我們定義一個陣列來儲存最近的預測紀錄，並初始化圖表物件：

```javascript
let historyData = []; // 儲存預測數值的陣列
let myChart = null;   // 圖表實例

function updateChart(newCount) {
    const ctx = document.getElementById('historyChart').getContext('2d');
    
    // 只保留最近 7 次紀錄
    historyData.push(newCount);
    if (historyData.length > 7) historyData.shift();

    // 如果圖表已存在則更新，不存在則建立
    if (myChart) {
        myChart.update();
    } else {
        myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['1', '2', '3', '4', '5', '6', '7'], // 代表最近幾次的紀錄
                datasets: [{
                    label: '需求趨勢',
                    data: historyData,
                    borderColor: '#3498db',
                    backgroundColor: 'rgba(52, 152, 219, 0.1)',
                    fill: true,
                    tension: 0.4 // 讓線條變圓滑
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: { y: { beginAtZero: true } }
            }
        });
    }
}

```

---

### ## **3. 在預測成功後調用圖表**

在你的 `predictDemand()` 函式最後面，當拿到 `data.predicted_count` 時，呼叫這個更新功能：

```javascript
// ... 在 predictCount.innerText 更新之後 ...
updateChart(data.predicted_count);

```

---

### ## **這項功能的技術意義**

* **視覺化趨勢**：使用者可以連續點擊不同的溫度或小時，觀察圖表中的波峰波谷，這能更直觀地體現 AI 模型對資料規律的掌握。
* **動態回饋**：圖表會隨著每一次點擊「進行AI預測分析」而實時跳動，增加互動感。

---
